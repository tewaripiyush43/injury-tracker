// schema.prisma

generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider  = "postgresql"
    url       = env("POSTGRES_PRISMA_URL")
    directUrl = env("POSTGRES_URL_NON_POOLING")
}

model User {
    id        String         @id @default(uuid())
    email     String         @unique
    nickname  String         @unique
    createdAt DateTime       @default(now()) @map(name: "created_at")
    reports   InjuryReport[]
}

model InjuryReport {
    id             String   @id @default(uuid())
    reporterName   String
    injuryDateTime DateTime
    reportDate     DateTime @default(now())
    updatedDate    DateTime @updatedAt
    User           User?    @relation(fields: [userId], references: [id], onDelete: Cascade)
    userId         String?

    areas InjuryArea[]
}

model InjuryArea {
    id            String       @id @default(uuid())
    areaNumber    Int
    top           Float
    left          Float
    injuryOf      String
    injuryDetails String
    report        InjuryReport @relation(fields: [reportId], references: [id], onDelete: Cascade)
    reportId      String
}
